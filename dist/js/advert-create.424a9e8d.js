(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["advert-create"],{"330c":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return o}));var r=a("b32d"),n=function(){return Object(r["a"])({method:"GET",url:"/front/ad/space/getAllSpaces"})},s=function(e){return Object(r["a"])({method:"GET",url:"/front/ad/space/getSpaceById",params:{id:e}})},o=function(e){return Object(r["a"])({method:"POST",url:"/front/ad/space/saveOrUpdate",data:e})}},"48b9":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return i}));var r=a("b32d"),n=function(){return Object(r["a"])({method:"GET",url:"/front/ad/getAdList"})},s=function(e){return Object(r["a"])({method:"GET",url:"/front/ad/getAdById",params:{id:e}})},o=function(e){return Object(r["a"])({method:"POST",url:"/front/ad/saveOrUpdate",data:e})},i=function(e,t){return Object(r["a"])({method:"GET",url:"/front/ad/updateStatus",params:{id:e,status:t}})}},"53f5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"advert-create"},[a("create-or-update-advert")],1)},n=[],s=a("2b0e"),o=a("7c25"),i=s["default"].extend({name:"AdvertCreate",components:{CreateOrUpdateAdvert:o["a"]}}),c=i,d=a("2877"),u=Object(d["a"])(c,r,n,!1,null,"0aedd001",null);t["default"]=u.exports},"6fd8":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return c}));var r=a("b32d"),n=function(e){return Object(r["a"])({method:"POST",url:"/boss/course/getQueryCourses",data:e})},s=function(e){return Object(r["a"])({method:"GET",url:"/boss/course/changeState",params:e})},o=function(e){return Object(r["a"])({method:"POST",url:"/boss/course/saveOrUpdateCourse",data:e})},i=function(e,t){return Object(r["a"])({method:"POST",url:"/boss/course/upload",data:e,onUploadProgress:t})},c=function(e){return Object(r["a"])({method:"GET",url:"/boss/course/getCourseById",params:{courseId:e}})}},"7ad4":function(e,t,a){},"7c25":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"create-or-update-advert"},[a("div",{staticClass:"page-header"},[a("el-page-header",{attrs:{content:e.isEdit?"编辑广告":"添加广告"},on:{back:e.goBack}})],1),a("el-card",{staticStyle:{"margin-top":"20px"}},[a("el-form",{ref:"advert",attrs:{"label-width":"120px",rules:e.rules,model:e.advert}},[a("el-form-item",{attrs:{label:"广告名称",prop:"name"}},[a("el-input",{model:{value:e.advert.name,callback:function(t){e.$set(e.advert,"name",t)},expression:"advert.name"}})],1),a("el-form-item",{attrs:{label:"广告位置",prop:"spaceId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.advert.spaceId,callback:function(t){e.$set(e.advert,"spaceId",t)},expression:"advert.spaceId"}},e._l(e.advertSpaces,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.advert.startTime,callback:function(t){e.$set(e.advert,"startTime",t)},expression:"advert.startTime"}})],1),a("el-form-item",{attrs:{label:"到期时间",prop:"endTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.advert.endTime,callback:function(t){e.$set(e.advert,"endTime",t)},expression:"advert.endTime"}})],1),a("el-form-item",{attrs:{label:"下线/上线",prop:"status"}},[a("el-radio",{attrs:{label:0},model:{value:e.advert.status,callback:function(t){e.$set(e.advert,"status",t)},expression:"advert.status"}},[e._v("下线")]),a("el-radio",{attrs:{label:1},model:{value:e.advert.status,callback:function(t){e.$set(e.advert,"status",t)},expression:"advert.status"}},[e._v("上线")])],1),a("el-form-item",{attrs:{label:"广告图片",prop:"img"}},[a("advert-image",{model:{value:e.advert.img,callback:function(t){e.$set(e.advert,"img",t)},expression:"advert.img"}}),a("el-tag",{attrs:{type:"info"}},[e._v("建议尺寸：230*300px，JPG、PNG格式，图片小于150K")])],1),a("el-form-item",{attrs:{label:"广告链接",prop:"link"}},[a("el-input",{model:{value:e.advert.link,callback:function(t){e.$set(e.advert,"link",t)},expression:"advert.link"}})],1),a("el-form-item",{attrs:{label:"广告备注",prop:"text"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.advert.text,callback:function(t){e.$set(e.advert,"text",t)},expression:"advert.text"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSave}},[e._v("保存")]),e.isEdit?e._e():a("el-button",{on:{click:e.onReset}},[e._v("重置")])],1)],1)],1)],1)},n=[],s=(a("96cf"),a("1da1")),o=a("2b0e"),i=a("48b9"),c=a("330c"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"advert-image"},[e.isUploadLoading?a("el-progress",{attrs:{type:"circle",percentage:e.percentage,width:178,status:100===e.percentage?"success":void 0}}):a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"before-upload":e.beforeAvatarUpload,"http-request":e.handleUpload}},[e.value?a("img",{staticClass:"avatar",attrs:{src:e.value}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)},u=[],l=(a("b0c0"),a("6fd8")),p=o["default"].extend({name:"AdvertImage",data:function(){return{isUploadLoading:!1,percentage:0}},props:{value:{type:String}},methods:{beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleUpload:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isUploadLoading=!0,r=new FormData,r.append("file",e.file),a.next=5,Object(l["e"])(r,(function(e){t.percentage=Math.floor(e.loaded/e.total*100)}));case 5:n=a.sent,s=n.data,t.isUploadLoading=!1,t.percentage=0,t.$emit("input",s.data.name);case 10:case"end":return a.stop()}}),a)})))()}}}),m=p,f=(a("df92"),a("2877")),v=Object(f["a"])(m,d,u,!1,null,"abf6f944",null),b=v.exports,g=o["default"].extend({name:"CreateOrUpdateAdvert",components:{AdvertImage:b},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{advert:{name:"",spaceId:1,text:"",img:"",link:"",startTime:"",endTime:"",status:0},advertSpaces:[],loading:!1,rules:{name:[{required:!0,message:"请输入广告名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"blur"}],endTime:[{required:!0,message:"请选择到期时间",trigger:"blur"}],link:[{required:!0,message:"请输入广告链接",trigger:"blur"}]}}},created:function(){this.loadAdvertSpace(),this.isEdit&&this.loadAdvert()},methods:{loadAdvert:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["c"])(e.$route.params.id);case 2:a=t.sent,r=a.data,e.advert=r.content;case 5:case"end":return t.stop()}}),t)})))()},loadAdvertSpace:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["b"])();case 2:a=t.sent,r=a.data,e.advertSpaces=r.content;case 5:case"end":return t.stop()}}),t)})))()},handleSave:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.advert.validate();case 2:return e.loading=!0,t.prev=3,t.next=6,Object(i["a"])(e.advert);case 6:e.$message.success("保存成功"),e.$router.push("/advert"),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log(t.t0),e.$message.error("保存失败");case 14:e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))()},onReset:function(){this.$refs.advert.resetFields()},goBack:function(){this.$router.push("/advert")}}}),h=g,x=Object(f["a"])(h,r,n,!1,null,"3fd255f3",null);t["a"]=x.exports},b0c0:function(e,t,a){var r=a("83ab"),n=a("9bf2").f,s=Function.prototype,o=s.toString,i=/^\s*function ([^ (]*)/,c="name";r&&!(c in s)&&n(s,c,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})},df92:function(e,t,a){"use strict";a("7ad4")}}]);
//# sourceMappingURL=advert-create.424a9e8d.js.map