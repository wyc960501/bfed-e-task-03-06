(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["advert"],{"330c":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return s}));var a=n("b32d"),r=function(){return Object(a["a"])({method:"GET",url:"/front/ad/space/getAllSpaces"})},c=function(t){return Object(a["a"])({method:"GET",url:"/front/ad/space/getSpaceById",params:{id:t}})},s=function(t){return Object(a["a"])({method:"POST",url:"/front/ad/space/saveOrUpdate",data:t})}},"46ad":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"advert-index"},[n("advert-list")],1)},r=[],c=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"adveret-list"},[n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-button",{on:{click:function(e){return t.$router.push({name:"advert-create"})}}},[t._v("添加广告")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.adverts,stripe:!0,border:""}},[n("el-table-column",{attrs:{prop:"id",label:"id"}}),n("el-table-column",{attrs:{prop:"name",label:"广告名称"}}),n("el-table-column",{attrs:{prop:"space",label:"广告位置"}}),n("el-table-column",{attrs:{label:"广告图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.img,lazy:!0,fit:"cover"}})]}}])}),n("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v("开始时间："+t._s(e.row.startTimeFormatString))]),n("br"),n("span",[t._v("结束时间："+t._s(e.row.endTimeFormatString))]),n("span")]}}])}),n("el-table-column",{attrs:{prop:"status",label:"上线/下线"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949",disabled:e.row.isStatusLoading},on:{change:function(n){return t.onStateChange(e.row)}},model:{value:e.row.status,callback:function(n){t.$set(e.row,"status",n)},expression:"scope.row.status"}})]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.$router.push({name:"advert-edit",params:{id:e.row.id}})}}},[t._v("编辑")])]}}])})],1)],1)],1)},o=[],u=(n("4160"),n("b0c0"),n("159b"),n("96cf"),n("1da1")),i=n("48b9"),d=n("330c"),l=c["default"].extend({name:"AdvertList",data:function(){return{adverts:[],space:[],isLoading:!1}},created:function(){this.loadAdSpace(),this.loadAdverts()},methods:{loadAdSpace:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["b"])();case 2:n=e.sent,a=n.data,t.space=a.content;case 5:case"end":return e.stop()}}),e)})))()},loadAdverts:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,Object(i["b"])();case 3:n=e.sent,a=n.data,r=t.space,a.content.forEach((function(t){t.isStatusLoading=!1,r.forEach((function(e){t.spaceId===e.id&&(t.space=e.name)}))})),t.adverts=a.content,t.isLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},onStateChange:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isStatusLoading=!0,n.prev=1,n.next=4,Object(i["d"])(t.id,t.status);case 4:e.$message.success("".concat(0===t.status?"下线":"上线","成功")),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0);case 10:t.isStatusLoading=!1;case 11:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}}),f=l,p=n("2877"),b=Object(p["a"])(f,s,o,!1,null,"12e6f6a8",null),m=b.exports,v=c["default"].extend({name:"AdvertIndex",components:{AdvertList:m}}),h=v,g=Object(p["a"])(h,a,r,!1,null,"2b1a9a0b",null);e["default"]=g.exports},"48b9":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return o}));var a=n("b32d"),r=function(){return Object(a["a"])({method:"GET",url:"/front/ad/getAdList"})},c=function(t){return Object(a["a"])({method:"GET",url:"/front/ad/getAdById",params:{id:t}})},s=function(t){return Object(a["a"])({method:"POST",url:"/front/ad/saveOrUpdate",data:t})},o=function(t,e){return Object(a["a"])({method:"GET",url:"/front/ad/updateStatus",params:{id:t,status:e}})}},b0c0:function(t,e,n){var a=n("83ab"),r=n("9bf2").f,c=Function.prototype,s=c.toString,o=/^\s*function ([^ (]*)/,u="name";a&&!(u in c)&&r(c,u,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=advert.c2e5ec23.js.map